<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LiveAtlas | The Universal Exchange</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --neon: #bc00ff;
            --cyan: #00f2ff;
            --hot-pink: #ff007a;
            --bg-dark: #020005;
            --glass: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(188, 0, 255, 0.4);
            --font-hdr: 'Orbitron', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--bg-dark); color: #fff; font-family: 'Rajdhani', sans-serif; overflow-x: hidden; }

        #bg-canvas { position: fixed; top: 0; left: 0; z-index: -1; }

        /* Navigation */
        nav {
            position: fixed; top: 0; width: 100%; height: 90px; padding: 0 50px;
            display: flex; justify-content: space-between; align-items: center; z-index: 1000; 
            background: rgba(2, 0, 5, 0.9); backdrop-filter: blur(20px); border-bottom: 1px solid var(--glass-border);
        }
        .nav-logo img { height: 50px; width: auto; cursor: pointer; }
        .nav-links { display: flex; gap: 30px; align-items: center; }
        .nav-links a { color: #fff; text-decoration: none; font-family: var(--font-hdr); font-size: 11px; letter-spacing: 2px; cursor: pointer; }

        /* Page Layouts */
        .page-container { transition: opacity 0.5s ease; }
        section { min-height: 100vh; padding: 150px 10% 100px 10%; display: flex; flex-direction: column; justify-content: center; position: relative; z-index: 10; }
        
        .hero-title { 
            font-family: var(--font-hdr); font-size: clamp(3.5rem, 12vw, 8.5rem); font-weight: 900; line-height: 0.9;
            background: linear-gradient(180deg, #fff, var(--cyan), var(--neon)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 40px;
        }

        .glass-card { 
            background: var(--glass); backdrop-filter: blur(40px); border: 1px solid var(--glass-border); 
            border-radius: 40px; padding: 40px; width: 100%; margin: 20px 0;
        }

        /* Gateway Grid */
        .store-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-top: 40px; }

        .gateway-card { 
            background: rgba(255, 255, 255, 0.02); padding: 20px; border-radius: 25px; border: 1px solid rgba(255, 255, 255, 0.1);
            transition: 0.4s; cursor: pointer; overflow: hidden; position: relative;
        }
        .gateway-card:hover { border-color: var(--cyan); transform: scale(1.05); }
        .gateway-card img { width: 100%; height: 250px; object-fit: cover; border-radius: 15px; margin-bottom: 15px; filter: grayscale(50%); transition: 0.4s; }
        .gateway-card:hover img { filter: grayscale(0%); }

        /* Experience Gallery Styling */
        #node-experience { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: var(--bg-dark); z-index: 2000; overflow-y: auto; padding: 100px 10%; }
        .gallery-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 40px 0; }
        .gallery-grid img { width: 100%; height: 400px; object-fit: cover; border-radius: 20px; border: 1px solid var(--glass-border); }

        /* UI Elements */
        .btn-main, .btn-buy { 
            background: linear-gradient(90deg, var(--neon), var(--hot-pink)); color: #fff; font-family: var(--font-hdr); 
            padding: 18px 40px; border: none; clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%); cursor: pointer; text-transform: uppercase; letter-spacing: 2px;
        }
        .back-btn { font-family: var(--font-hdr); color: var(--cyan); cursor: pointer; margin-bottom: 20px; display: inline-block; }

        #checkout-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 3000; display: none; justify-content: center; align-items: center; }
        .cart-count { background: var(--cyan); color: #000; padding: 2px 10px; border-radius: 5px; margin-left: 10px; font-weight: 900; }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <nav>
        <div class="nav-logo" onclick="closeExperience()">
            <img src="logo.png" alt="LiveAtlas Logo" onerror="this.src='https://via.placeholder.com/150x50?text=LOGO'">
        </div>
        <div class="nav-links">
            <a href="#home" onclick="closeExperience()">Home</a>
            <a href="#nodes" onclick="closeExperience()">Nodes</a>
            <a href="#shop" onclick="closeExperience()">Boutique</a>
            <a href="#booking" onclick="closeExperience()">Reserve</a>
            <a onclick="openCheckout()">Cart <span class="cart-count" id="cart-val">0</span></a>
        </div>
    </nav>

    <div id="main-site" class="page-container">
        <section id="home">
            <h1 class="hero-title reveal">Universal<br>Telepresence</h1>
            <p class="reveal" style="font-size: 1.5rem; color: #aaa; max-width: 600px;">Click a Gateway below to initialize your visual link.</p>
        </section>

        <section id="nodes">
            <h2 class="reveal">Active Gateways</h2>
            <p style="color: var(--cyan); margin-bottom: 20px;">[ Select a destination to preview the feed ]</p>
            <div class="store-grid">
                <div class="gateway-card reveal" onclick="openExperience('Dubai')">
                    <img src="https://images.unsplash.com/photo-1512453979798-5ea266f8880c?auto=format&fit=crop&w=600" alt="Dubai">
                    <h3>DUBAI HUB</h3>
                    <p>Urban Luxury & Desert Horizons</p>
                </div>
                <div class="gateway-card reveal" onclick="openExperience('Antarctica')">
                    <img src="https://images.unsplash.com/photo-1516738901171-8eb4fc13bd20?auto=format&fit=crop&w=600" alt="Antarctica">
                    <h3>VOSTOK STATION</h3>
                    <p>Polar Research & Ice Immersion</p>
                </div>
                <div class="gateway-card reveal" onclick="openExperience('Tokyo')">
                    <img src="https://images.unsplash.com/photo-1503899036084-c55cdd92da26?auto=format&fit=crop&w=600" alt="Tokyo">
                    <h3>SHIBUYA NODE</h3>
                    <p>Cyberpunk Nights & Neon Streets</p>
                </div>
                <div class="gateway-card reveal" onclick="openExperience('Sahara')">
                    <img src="https://images.unsplash.com/photo-1509316785289-025f5b846b35?auto=format&fit=crop&w=600" alt="Sahara">
                    <h3>SAHARA CAMP</h3>
                    <p>Infinite Dunes & Celestial Views</p>
                </div>
            </div>
        </section>

        <section id="shop">
            <div class="glass-card reveal">
                <h2>The Boutique</h2>
                <div class="store-grid" id="product-list"></div>
            </div>
        </section>

        <section id="booking">
            <div class="glass-card reveal">
                <h2 style="text-align: center; margin-bottom: 30px;">Global Link Reservation</h2>
                <div style="height: 600px; border-radius: 20px; overflow: hidden; background: #fff;">
                    <iframe src="https://cal.com/live-atlas" width="100%" height="100%" frameborder="0"></iframe>
                </div>
            </div>
        </section>
    </div>

    <div id="node-experience">
        <div class="back-btn" onclick="closeExperience()">‚Üê RETURN TO ATLAS</div>
        <h1 id="exp-title" class="hero-title"></h1>
        <p id="exp-desc" style="font-size: 1.2rem; color: #ccc; max-width: 800px;"></p>
        
        <div class="gallery-grid" id="exp-gallery">
            </div>

        <div class="glass-card" style="text-align: center;">
            <h3>Ready to see this in real-time?</h3>
            <p style="margin: 15px 0;">Our guides are standing by at this location.</p>
            <button class="btn-main" onclick="goToBooking()">RESERVE THIS LINK</button>
        </div>
    </div>

    <div id="checkout-modal">
        <div class="glass-card" style="width: 90%; max-width: 500px; text-align: center;">
            <h2>Your Cart</h2>
            <div id="cart-items" style="margin: 20px 0;"></div>
            <p>Total: <span class="price" id="total-price">$0</span></p>
            <button class="btn-buy" style="width:100%; margin-top:20px;" onclick="finalizePayment()">Pay via Neural-Pay</button>
            <button onclick="closeCheckout()" style="background:none; border:none; color:#888; margin-top:15px; cursor:pointer;">Close</button>
        </div>
    </div>

    <script>
        // GATEWAY DATA
        const nodeData = {
            'Dubai': {
                desc: 'Experience the pinnacle of human engineering. From the Burj Khalifa spire to the hidden gold souks, our guides offer a 3D stereoscopic view of the worlds most vertical city.',
                imgs: ['https://images.unsplash.com/photo-1518684079-3c830dcef090?auto=format&fit=crop&w=800', 'https://images.unsplash.com/photo-1489846986288-ff35fd91a43b?auto=format&fit=crop&w=800']
            },
            'Antarctica': {
                desc: 'Witness the raw power of the Vostok station. A world of pure white, crystalline structures, and silent frozen majesty. Extremely limited uplink slots available.',
                imgs: ['https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=800', 'https://images.unsplash.com/photo-1516738901171-8eb4fc13bd20?auto=format&fit=crop&w=800']
            },
            'Tokyo': {
                desc: 'Dive into the neon heart of Shibuya. Our guides navigate the crowded streets and high-tech alleys in 4K resolution, bringing the energy of Tokyo directly to your headset.',
                imgs: ['https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?auto=format&fit=crop&w=800', 'https://images.unsplash.com/photo-1503899036084-c55cdd92da26?auto=format&fit=crop&w=800']
            },
            'Sahara': {
                desc: 'The ultimate star-gazing experience. Travel to the deep dunes where the lack of light pollution reveals the galaxy in unprecedented detail.',
                imgs: ['https://images.unsplash.com/photo-1473580044384-7ba9967e16a0?auto=format&fit=crop&w=800', 'https://images.unsplash.com/photo-1509316785289-025f5b846b35?auto=format&fit=crop&w=800']
            }
        };

        // NAVIGATION LOGIC
        function openExperience(nodeName) {
            const data = nodeData[nodeName];
            document.getElementById('main-site').style.display = 'none';
            document.getElementById('node-experience').style.display = 'block';
            document.getElementById('exp-title').innerText = nodeName;
            document.getElementById('exp-desc').innerText = data.desc;
            
            const gallery = document.getElementById('exp-gallery');
            gallery.innerHTML = data.imgs.map(img => `<img src="${img}" class="reveal">`).join('');
            
            window.scrollTo(0,0);
        }

        function closeExperience() {
            document.getElementById('main-site').style.display = 'block';
            document.getElementById('node-experience').style.display = 'none';
        }

        function goToBooking() {
            closeExperience();
            window.location.hash = 'booking';
        }

        // PRODUCTS & CART (As requested, keeping integrations same)
        const products = [
            { id: 1, name: "Antarctic Core Water", price: 250, origin: "Vostok", img: "https://images.unsplash.com/photo-1551009175-8a68da93d5f9?auto=format&fit=crop&w=500" },
            { id: 2, name: "Dubai Gold Silk", price: 1200, origin: "Souk", img: "https://images.unsplash.com/photo-1582738411706-bfc8e691d1c2?auto=format&fit=crop&w=500" },
            { id: 3, name: "Amazon Orchid", price: 85, origin: "Manaus", img: "https://images.unsplash.com/photo-1596436889106-be35e843f974?auto=format&fit=crop&w=500" },
            { id: 4, name: "Sahara Meteorite", price: 450, origin: "Dunes", img: "https://images.unsplash.com/photo-1511270339309-c0529883652c?auto=format&fit=crop&w=500" }
        ];

        let cart = [];
        const shopList = document.getElementById('product-list');
        products.forEach(p => {
            shopList.innerHTML += `<div class="product-card">
                <img src="${p.img}">
                <h3>${p.name}</h3>
                <p class="price">$${p.price}</p>
                <button class="btn-buy" onclick="addToCart(${p.id})">Add to Cart</button>
            </div>`;
        });

        function addToCart(id) { cart.push(products.find(p => p.id === id)); document.getElementById('cart-val').innerText = cart.length; }
        function openCheckout() { document.getElementById('checkout-modal').style.display = 'flex'; const itemsDiv = document.getElementById('cart-items'); itemsDiv.innerHTML = cart.map(i => `<div style="display:flex; justify-content:space-between;"><span>${i.name}</span><span>$${i.price}</span></div>`).join(''); document.getElementById('total-price').innerText = `$${cart.reduce((a, b) => a + b.price, 0)}`; }
        function closeCheckout() { document.getElementById('checkout-modal').style.display = 'none'; }
        function finalizePayment() { alert("Neural Uplink Successful."); cart = []; document.getElementById('cart-val').innerText = 0; closeCheckout(); }

        // 3D ENGINE
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);

        const globe = new THREE.Mesh(new THREE.SphereGeometry(5, 50, 50), new THREE.MeshBasicMaterial({ color: 0xbc00ff, wireframe: true, transparent: true, opacity: 0.1 }));
        scene.add(globe);

        const starCount = 15000;
        const starPos = new Float32Array(starCount * 3);
        for(let i=0; i<starCount*3; i++) starPos[i] = (Math.random()-0.5)*2000;
        const starGeom = new THREE.BufferGeometry();
        starGeom.setAttribute('position', new THREE.BufferAttribute(starPos, 3));
        const stars = new THREE.Points(starGeom, new THREE.PointsMaterial({color: 0xffffff, size: 0.7, transparent: true, opacity: 0.8}));
        scene.add(stars);

        camera.position.z = 15;

        gsap.registerPlugin(ScrollTrigger);
        function animate() {
            requestAnimationFrame(animate);
            globe.rotation.y += 0.002;
            stars.rotation.y += 0.0001;
            globe.position.y = (window.scrollY / 150);
            renderer.render(scene, camera);
        }
        animate();

        window.onresize = () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        };
    </script>
</body>
</html>
